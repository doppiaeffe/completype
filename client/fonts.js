var fonts=["ABeeZee",
"Abel",
"Abhaya+Libre",
"Abril+Fatface",
"Aclonica",
"Acme",
"Actor",
"Adamina",
"Advent+Pro",
"Aguafina+Script",
"Akronim",
"Aladin",
"Aldrich",
"Alef",
"Alegreya",
"Alegreya+SC",
"Alegreya+Sans",
"Alegreya+Sans+SC",
"Alex+Brush",
"Alfa+Slab+One",
"Alice",
"Alike",
"Alike+Angular",
"Allan",
"Allerta",
"Allerta+Stencil",
"Allura",
"Almendra",
"Almendra+Display",
"Almendra+SC",
"Amarante",
"Amaranth",
"Amatic+SC",
"Amatica+SC",
"Amethysta",
"Amiko",
"Amiri",
"Amita",
"Anaheim",
"Andada",
"Andika",
"Angkor",
"Annie+Use+Your+Telescope",
"Anonymous+Pro",
"Antic",
"Antic+Didone",
"Antic+Slab",
"Anton",
"Arapey",
"Arbutus",
"Arbutus+Slab",
"Architects+Daughter",
"Archivo",
"Archivo+Black",
"Archivo+Narrow",
"Aref+Ruqaa",
"Arima+Madurai",
"Arimo",
"Arizonia",
"Armata",
"Arsenal",
"Artifika",
"Arvo",
"Arya",
"Asap",
"Asap+Condensed",
"Asar",
"Asset",
"Assistant",
"Astloch",
"Asul",
"Athiti",
"Atma",
"Atomic+Age",
"Aubrey",
"Audiowide",
"Autour+One",
"Average",
"Average+Sans",
"Averia+Gruesa+Libre",
"Averia+Libre",
"Averia+Sans+Libre",
"Averia+Serif+Libre",
"Bahiana",
"Baloo",
"Baloo+Bhai",
"Baloo+Bhaijaan",
"Baloo+Bhaina",
"Baloo+Chettan",
"Baloo+Da",
"Baloo+Paaji",
"Baloo+Tamma",
"Baloo+Tammudu",
"Baloo+Thambi",
"Balthazar",
"Bangers",
"Barrio",
"Basic",
"Battambang",
"Baumans",
"Bayon",
"Belgrano",
"Bellefair",
"Belleza",
"BenchNine",
"Bentham",
"Berkshire+Swash",
"Bevan",
"Bigelow+Rules",
"Bigshot+One",
"Bilbo",
"Bilbo+Swash+Caps",
"BioRhyme",
"BioRhyme+Expanded",
"Biryani",
"Bitter",
"Black+Ops+One",
"Bokor",
"Bonbon",
"Boogaloo",
"Bowlby+One",
"Bowlby+One+SC",
"Brawler",
"Bree+Serif",
"Bubblegum+Sans",
"Bubbler+One",
"Buda",
"Buenard",
"Bungee",
"Bungee+Hairline",
"Bungee+Inline",
"Bungee+Outline",
"Butcherman",
"Butterfly+Kids",
"Cabin",
"Cabin+Condensed",
"Cabin+Sketch",
"Caesar+Dressing",
"Cagliostro",
"Cairo",
"Calligraffitti",
"Cambay",
"Cambo",
"Candal",
"Cantarell",
"Cantata+One",
"Cantora+One",
"Capriola",
"Cardo",
"Carme",
"Carrois+Gothic",
"Carrois+Gothic+SC",
"Carter+One",
"Catamaran",
"Caudex",
"Caveat",
"Caveat+Brush",
"Cedarville+Cursive",
"Ceviche+One",
"Changa",
"Changa+One",
"Chango",
"Chathura",
"Chau+Philomene+One",
"Chela+One",
"Chelsea+Market",
"Chenla",
"Cherry+Cream+Soda",
"Cherry+Swash",
"Chewy",
"Chicle",
"Chivo",
"Chonburi",
"Cinzel",
"Cinzel+Decorative",
"Clicker+Script",
"Coda",
"Coda+Caption",
"Codystar",
"Coiny",
"Combo",
"Comfortaa",
"Coming+Soon",
"Concert+One",
"Condiment",
"Content",
"Contrail+One",
"Convergence",
"Cookie",
"Copse",
"Corben",
"Cormorant",
"Cormorant+Garamond",
"Cormorant+Infant",
"Cormorant+SC",
"Cormorant+Unicase",
"Cormorant+Upright",
"Courgette",
"Cousine",
"Coustard",
"Covered+By+Your+Grace",
"Crafty+Girls",
"Creepster",
"Crete+Round",
"Crimson+Text",
"Croissant+One",
"Crushed",
"Cuprum",
"Cutive",
"Cutive+Mono",
"Damion",
"Dancing+Script",
"Dangrek",
"David+Libre",
"Dawning+of+a+New+Day",
"Days+One",
"Dekko",
"Delius",
"Delius+Swash+Caps",
"Delius+Unicase",
"Della+Respira",
"Denk+One",
"Devonshire",
"Dhurjati",
"Didact+Gothic",
"Diplomata",
"Diplomata+SC",
"Domine",
"Donegal+One",
"Doppio+One",
"Dorsa",
"Dosis",
"Dr+Sugiyama",
"Droid+Sans",
"Droid+Sans+Mono",
"Droid+Serif",
"Duru+Sans",
"Dynalight",
"EB+Garamond",
"Eagle+Lake",
"Eater",
"Economica",
"Eczar",
"El+Messiri",
"Electrolize",
"Elsie",
"Elsie+Swash+Caps",
"Emblema+One",
"Emilys+Candy",
"Encode+Sans",
"Encode+Sans+Condensed",
"Encode+Sans+Expanded",
"Encode+Sans+Semi+Condensed",
"Encode+Sans+Semi+Expanded",
"Engagement",
"Englebert",
"Enriqueta",
"Erica+One",
"Esteban",
"Euphoria+Script",
"Ewert",
"Exo",
"Exo+2",
"Expletus+Sans",
"Fanwood+Text",
"Farsan",
"Fascinate",
"Fascinate+Inline",
"Faster+One",
"Fasthand",
"Fauna+One",
"Faustina",
"Federant",
"Federo",
"Felipa",
"Fenix",
"Finger+Paint",
"Fira+Mono",
"Fira+Sans",
"Fira+Sans+Condensed",
"Fira+Sans+Extra+Condensed",
"Fjalla+One",
"Fjord+One",
"Flamenco",
"Flavors",
"Fondamento",
"Fontdiner+Swanky",
"Forum",
"Francois+One",
"Frank+Ruhl+Libre",
"Freckle+Face",
"Fredericka+the+Great",
"Fredoka+One",
"Freehand",
"Fresca",
"Frijole",
"Fruktur",
"Fugaz+One",
"GFS+Didot",
"GFS+Neohellenic",
"Gabriela",
"Gafata",
"Galada",
"Galdeano",
"Galindo",
"Gentium+Basic",
"Gentium+Book+Basic",
"Geo",
"Geostar",
"Geostar+Fill",
"Germania+One",
"Gidugu",
"Gilda+Display",
"Give+You+Glory",
"Glass+Antiqua",
"Glegoo",
"Gloria+Hallelujah",
"Goblin+One",
"Gochi+Hand",
"Gorditas",
"Goudy+Bookletter+1911",
"Graduate",
"Grand+Hotel",
"Gravitas+One",
"Great+Vibes",
"Griffy",
"Gruppo",
"Gudea",
"Gurajada",
"Habibi",
"Halant",
"Hammersmith+One",
"Hanalei",
"Hanalei+Fill",
"Handlee",
"Hanuman",
"Happy+Monkey",
"Harmattan",
"Headland+One",
"Heebo",
"Henny+Penny",
"Herr+Von+Muellerhoff",
"Hind",
"Hind+Guntur",
"Hind+Madurai",
"Hind+Siliguri",
"Hind+Vadodara",
"Holtwood+One+SC",
"Homemade+Apple",
"Homenaje",
"IM+Fell+DW+Pica",
"IM+Fell+DW+Pica+SC",
"IM+Fell+Double+Pica",
"IM+Fell+Double+Pica+SC",
"IM+Fell+English",
"IM+Fell+English+SC",
"IM+Fell+French+Canon",
"IM+Fell+French+Canon+SC",
"IM+Fell+Great+Primer",
"IM+Fell+Great+Primer+SC",
"Iceberg",
"Iceland",
"Imprima",
"Inconsolata",
"Inder",
"Indie+Flower",
"Inika",
"Inknut+Antiqua",
"Irish+Grover",
"Istok+Web",
"Italiana",
"Italianno",
"Itim",
"Jacques+Francois",
"Jacques+Francois+Shadow",
"Jaldi",
"Jim+Nightshade",
"Jockey+One",
"Jolly+Lodger",
"Jomhuria",
"Josefin+Sans",
"Josefin+Slab",
"Joti+One",
"Judson",
"Julee",
"Julius+Sans+One",
"Junge",
"Jura",
"Just+Another+Hand",
"Just+Me+Again+Down+Here",
"Kadwa",
"Kalam",
"Kameron",
"Kanit",
"Kantumruy",
"Karla",
"Karma",
"Katibeh",
"Kaushan+Script",
"Kavivanar",
"Kavoon",
"Kdam+Thmor",
"Keania+One",
"Kelly+Slab",
"Kenia",
"Khand",
"Khmer",
"Khula",
"Kite+One",
"Knewave",
"Kotta+One",
"Koulen",
"Kranky",
"Kreon",
"Kristi",
"Krona+One",
"Kumar+One",
"Kumar+One+Outline",
"Kurale",
"La+Belle+Aurore",
"Laila",
"Lakki+Reddy",
"Lalezar",
"Lancelot",
"Lateef",
"Lato",
"League+Script",
"Leckerli+One",
"Ledger",
"Lekton",
"Lemon",
"Lemonada",
"Libre+Barcode+128",
"Libre+Barcode+128+Text",
"Libre+Barcode+39",
"Libre+Barcode+39+Extended",
"Libre+Barcode+39+Extended+Text",
"Libre+Barcode+39+Text",
"Libre+Baskerville",
"Libre+Franklin",
"Life+Savers",
"Lilita+One",
"Lily+Script+One",
"Limelight",
"Linden+Hill",
"Lobster",
"Lobster+Two",
"Londrina+Outline",
"Londrina+Shadow",
"Londrina+Sketch",
"Londrina+Solid",
"Lora",
"Love+Ya+Like+A+Sister",
"Loved+by+the+King",
"Lovers+Quarrel",
"Luckiest+Guy",
"Lusitana",
"Lustria",
"Macondo",
"Macondo+Swash+Caps",
"Mada",
"Magra",
"Maiden+Orange",
"Maitree",
"Mako",
"Mallanna",
"Mandali",
"Manuale",
"Marcellus",
"Marcellus+SC",
"Marck+Script",
"Margarine",
"Marko+One",
"Marmelad",
"Martel",
"Martel+Sans",
"Marvel",
"Mate",
"Mate+SC",
"Maven+Pro",
"McLaren",
"Meddon",
"MedievalSharp",
"Medula+One",
"Meera+Inimai",
"Megrim",
"Meie+Script",
"Merienda",
"Merienda+One",
"Merriweather",
"Merriweather+Sans",
"Metal",
"Metal+Mania",
"Metamorphous",
"Metrophobic",
"Michroma",
"Milonga",
"Miltonian",
"Miltonian+Tattoo",
"Miniver",
"Miriam+Libre",
"Mirza",
"Miss+Fajardose",
"Mitr",
"Modak",
"Modern+Antiqua",
"Mogra",
"Molengo",
"Molle",
"Monda",
"Monofett",
"Monoton",
"Monsieur+La+Doulaise",
"Montaga",
"Montez",
"Montserrat",
"Montserrat+Alternates",
"Montserrat+Subrayada",
"Moul",
"Moulpali",
"Mountains+of+Christmas",
"Mouse+Memoirs",
"Mr+Bedfort",
"Mr+Dafoe",
"Mr+De+Haviland",
"Mrs+Saint+Delafield",
"Mrs+Sheppards",
"Mukta",
"Mukta+Mahee",
"Mukta+Malar",
"Mukta+Vaani",
"Muli",
"Mystery+Quest",
"NTR",
"Neucha",
"Neuton",
"New+Rocker",
"News+Cycle",
"Niconne",
"Nixie+One",
"Nobile",
"Nokora",
"Norican",
"Nosifer",
"Nothing+You+Could+Do",
"Noticia+Text",
"Noto+Sans",
"Noto+Serif",
"Nova+Cut",
"Nova+Flat",
"Nova+Mono",
"Nova+Oval",
"Nova+Round",
"Nova+Script",
"Nova+Slim",
"Nova+Square",
"Numans",
"Nunito",
"Nunito+Sans",
"Odor+Mean+Chey",
"Offside",
"Old+Standard+TT",
"Oldenburg",
"Oleo+Script",
"Oleo+Script+Swash+Caps",
"Open+Sans",
"Open+Sans+Condensed",
"Oranienbaum",
"Orbitron",
"Oregano",
"Orienta",
"Original+Surfer",
"Oswald",
"Over+the+Rainbow",
"Overlock",
"Overlock+SC",
"Overpass",
"Overpass+Mono",
"Ovo",
"Oxygen",
"Oxygen+Mono",
"PT+Mono",
"PT+Sans",
"PT+Sans+Caption",
"PT+Sans+Narrow",
"PT+Serif",
"PT+Serif+Caption",
"Pacifico",
"Padauk",
"Palanquin",
"Palanquin+Dark",
"Pangolin",
"Paprika",
"Parisienne",
"Passero+One",
"Passion+One",
"Pathway+Gothic+One",
"Patrick+Hand",
"Patrick+Hand+SC",
"Pattaya",
"Patua+One",
"Pavanam",
"Paytone+One",
"Peddana",
"Peralta",
"Permanent+Marker",
"Petit+Formal+Script",
"Petrona",
"Philosopher",
"Piedra",
"Pinyon+Script",
"Pirata+One",
"Plaster",
"Play",
"Playball",
"Playfair+Display",
"Playfair+Display+SC",
"Podkova",
"Poiret+One",
"Poller+One",
"Poly",
"Pompiere",
"Pontano+Sans",
"Poppins",
"Port+Lligat+Sans",
"Port+Lligat+Slab",
"Pragati+Narrow",
"Prata",
"Preahvihear",
"Press+Start+2P",
"Pridi",
"Princess+Sofia",
"Prociono",
"Prompt",
"Prosto+One",
"Proza+Libre",
"Puritan",
"Purple+Purse",
"Quando",
"Quantico",
"Quattrocento",
"Quattrocento+Sans",
"Questrial",
"Quicksand",
"Quintessential",
"Qwigley",
"Racing+Sans+One",
"Radley",
"Rajdhani",
"Rakkas",
"Raleway",
"Raleway+Dots",
"Ramabhadra",
"Ramaraja",
"Rambla",
"Rammetto+One",
"Ranchers",
"Rancho",
"Ranga",
"Rasa",
"Rationale",
"Ravi+Prakash",
"Redressed",
"Reem+Kufi",
"Reenie+Beanie",
"Revalia",
"Rhodium+Libre",
"Ribeye",
"Ribeye+Marrow",
"Righteous",
"Risque",
"Roboto",
"Roboto+Condensed",
"Roboto+Mono",
"Roboto+Slab",
"Rochester",
"Rock+Salt",
"Rokkitt",
"Romanesco",
"Ropa+Sans",
"Rosario",
"Rosarivo",
"Rouge+Script",
"Rozha+One",
"Rubik",
"Rubik+Mono+One",
"Ruda",
"Rufina",
"Ruge+Boogie",
"Ruluko",
"Rum+Raisin",
"Ruslan+Display",
"Russo+One",
"Ruthie",
"Rye",
"Sacramento",
"Sahitya",
"Sail",
"Saira",
"Saira+Condensed",
"Saira+Extra+Condensed",
"Saira+Semi+Condensed",
"Salsa",
"Sanchez",
"Sancreek",
"Sansita",
"Sarala",
"Sarina",
"Sarpanch",
"Satisfy",
"Scada",
"Scheherazade",
"Schoolbell",
"Scope+One",
"Seaweed+Script",
"Secular+One",
"Sedgwick+Ave",
"Sedgwick+Ave+Display",
"Sevillana",
"Seymour+One",
"Shadows+Into+Light",
"Shadows+Into+Light+Two",
"Shanti",
"Share",
"Share+Tech",
"Share+Tech+Mono",
"Shojumaru",
"Short+Stack",
"Shrikhand",
"Siemreap",
"Sigmar+One",
"Signika",
"Signika+Negative",
"Simonetta",
"Sintony",
"Sirin+Stencil",
"Six+Caps",
"Skranji",
"Slabo+13px",
"Slabo+27px",
"Slackey",
"Smokum",
"Smythe",
"Sniglet",
"Snippet",
"Snowburst+One",
"Sofadi+One",
"Sofia",
"Sonsie+One",
"Sorts+Mill+Goudy",
"Source+Code+Pro",
"Source+Sans+Pro",
"Source+Serif+Pro",
"Space+Mono",
"Special+Elite",
"Spectral",
"Spicy+Rice",
"Spinnaker",
"Spirax",
"Squada+One",
"Sree+Krushnadevaraya",
"Sriracha",
"Stalemate",
"Stalinist+One",
"Stardos+Stencil",
"Stint+Ultra+Condensed",
"Stint+Ultra+Expanded",
"Stoke",
"Strait",
"Sue+Ellen+Francisco",
"Suez+One",
"Sumana",
"Sunshiney",
"Supermercado+One",
"Sura",
"Suranna",
"Suravaram",
"Suwannaphum",
"Swanky+and+Moo+Moo",
"Syncopate",
"Tangerine",
"Taprom",
"Tauri",
"Taviraj",
"Teko",
"Telex",
"Tenali+Ramakrishna",
"Tenor+Sans",
"Text+Me+One",
"The+Girl+Next+Door",
"Tienne",
"Tillana",
"Timmana",
"Tinos",
"Titan+One",
"Titillium+Web",
"Trade+Winds",
"Trirong",
"Trocchi",
"Trochut",
"Trykker",
"Tulpen+One",
"Ubuntu",
"Ubuntu+Condensed",
"Ubuntu+Mono",
"Ultra",
"Uncial+Antiqua",
"Underdog",
"Unica+One",
"UnifrakturCook",
"UnifrakturMaguntia",
"Unkempt",
"Unlock",
"Unna",
"VT323",
"Vampiro+One",
"Varela",
"Varela+Round",
"Vast+Shadow",
"Vesper+Libre",
"Vibur",
"Vidaloka",
"Viga",
"Voces",
"Volkhov",
"Vollkorn",
"Voltaire",
"Waiting+for+the+Sunrise",
"Wallpoet",
"Walter+Turncoat",
"Warnes",
"Wellfleet",
"Wendy+One",
"Wire+One",
"Work+Sans",
"Yanone+Kaffeesatz",
"Yantramanav",
"Yatra+One",
"Yellowtail",
"Yeseva+One",
"Yesteryear",
"Yrsa",
"Zeyada",
"Zilla+Slab",
"Zilla+Slab+Highlight",
];
var lungh = fonts.length;
var fontscelta1 = ""
var fontscelta2 = ""
var fontscelta3 = ""
var fontscelta1app = ""
var fontscelta2app = ""
var fontscelta3app = ""
var alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWYZabcdefghijklmnopqrstuvwyz'
var nGiusto = 0
var fontGiusto = ""
var points = 0
var time = 11
var livello = 1
var multiplayer = sessionStorage.getItem("multiplayer");
var timer = null;
var choosenChars = [];
var clickAviable = true;



//utility , genera un numero casuale tra quelli inseriti
function randomNumber(minimum, maximum)
{
    return Math.round( Math.random() * (maximum - minimum) + minimum);
}
//utility , prende un carattere a caso dalla stringa data
function randomChar(string)
{
    return string.charAt(Math.floor(Math.random() * string.length));
}


function setPoints(punti)
{
    points += punti
    document.getElementById("punti").innerHTML = points;
}

//sceglie 3 font casuali
function scegliFont()
{
    fontscelta1 = fonts[Math.floor(Math.random()*lungh)];
    fontscelta2 = fonts[Math.floor(Math.random()*lungh)];
    fontscelta3 = fonts[Math.floor(Math.random()*lungh)];

    fontscelta1app = fontscelta1.split('+').join(" ");
    fontscelta2app = fontscelta2.split('+').join(" ");
    fontscelta3app = fontscelta3.split('+').join(" ");

    nGiusto = randomNumber(1,3)
}


//scarica le font scelte da google font poi abbinali ai pulsanti
function caricaFont()
{
    document.getElementById("stile").innerHTML="@import url('https://fonts.googleapis.com/css?family="+fontscelta1+"|"+fontscelta2+"|"+fontscelta3+"');";
    
    document.getElementById("prima").style="font-family:'"+fontscelta1app+"';";
    document.getElementById("seconda").style="font-family:'"+fontscelta2app+"';";
    document.getElementById("terza").style="font-family:'"+fontscelta3app+"';";

    
    switch(nGiusto)
    {
        case 1 : {fontGiusto ="font-family:'"+fontscelta1app+"';"; break;}
        case 2 : {fontGiusto ="font-family:'"+fontscelta2app+"';"; break;}
        case 3 : {fontGiusto ="font-family:'"+fontscelta3app+"';"; break;}
    }
}


//sceglie e abbina in modo casuale le lettere indizio nella griglia
function scegliLettere()
{
    let tempAlphabet = alphabet
    
    for(let i=0; i<24; i++)
    {
        let char = randomChar(tempAlphabet)	

        choosenChars.push(char)

        tempAlphabet = tempAlphabet.replace(char,"")
    }
}

//sceglie e abbina in modo casuale le lettere indizio nella griglia
function caricaLettere()
{
    let lettere = document.querySelectorAll("div.lettera");
    
    for(let i=0; i<lettere.length; i++)
    {
        lettere[i].innerHTML = choosenChars[i]
        lettere[i].style = fontGiusto
    }
}

//pulsanti di risposta
function clickFont(num)
{
    if(clickAviable == true)
    {
        clickAviable = false

        //SINGLEPLAYER
        if(multiplayer === "false")
        {
                //hai premuto il pulsante corretto
                if(nGiusto == num)
                {
                    setPoints(+100)

                    overlayGiusto(true)
                    setTimeout(overlayGiusto,1000, false)

                    scegliFont()
                    caricaFont()

                    scegliLettere()
                    caricaLettere()

                    timerStart()
                }   
                else    //hai sbagliato
                {
                    if( points > localStorage.getItem("points") )
                    {
                        localStorage.setItem('points', points)
                    }

                    overlaySbagliato(true)
                    timerStop()
                    setTimeout(goBack,1000)
                }
        }
        else    //MULTIPLAYER
        {
                //hai premuto il pulsante corretto
                if(nGiusto == num)
                {
                    setPoints(+100)

                    overlayGiusto(true)

                    socket.emit("first","")
                }
                else    //hai sbagliato
                {
                    setPoints(-50)
                }
        }
    }
}

//gestisci l'overlay di risposta giusta
function overlayGiusto(val)
{   
    let mode = true;
    if(val == true) {mode = "inline"}else{mode = "none"}
    document.getElementById("risultato").style.display = mode
    document.getElementById("giusto").style.display = mode
}

//gestisci l'overlay di risposta sbagliata
function overlaySbagliato(val)
{   
    let mode = true;
    if(val == true) {mode = "inline"}else{mode = "none"}
    document.getElementById("risultato").style.display = mode
    document.getElementById("sbagliato").style.display = mode
}

//gestisci l'overlay di tempo scaduto
function overlayTempo(val)
{   
    let mode = true;
    if(val == true) {mode = "inline"}else{mode = "none"}
    document.getElementById("risultato").style.display = mode
    document.getElementById("tempo").style.display = mode
}

//gestisci l'overlay di attesa del multiplayer
function overlayMultiplayer(val)
{
    let mode = true;
    if(val == true) {mode = "inline"}else{mode = "none"}
    document.getElementById("risultato").style.display = mode
    document.getElementById("ricerca").style.display = mode
}

//gestisci l'overlay di quando il nemico fa un punto
function overlayFirst(val)
{
    let mode = true;
    if(val == true) {mode = "inline"}else{mode = "none"}
    document.getElementById("risultato").style.display = mode
    document.getElementById("first").style.display = mode
}

//gestisci l'overlay di quando il nemico si disconette
function overlayDisconnect(val)
{
    let mode = true;
    if(val == true) {mode = "inline"}else{mode = "none"}
    document.getElementById("risultato").style.display = mode
    document.getElementById("disconnect").style.display = mode
}

//torna al menu iniziale
function goBack()
{
    window.location.href = "index.html"   
}


//fai partire il countdown
function timerStart()
{
    time = 11
    document.getElementById("timer").innerHTML = time
    timerStop()

    timer = setInterval(function()
    {
        time -= 1
        document.getElementById("timer").innerHTML = time

        if(time < 1)
        {
            overlayTempo(true)     
            setTimeout(goBack,4000)
        }
        
    },1000)
}

function timerStop()
{
    clearInterval(timer)
}




if(multiplayer == "true")
{
    var socket = io();

    overlayMultiplayer(true)


    //inizia un nuovo livello ricevendo le informazioni dal server
    socket.on('matchStart',function(data)
    {  
        fontscelta1 = data.font1
        fontscelta2 = data.font2
        fontscelta3 = data.font3

        fontscelta1app = data.font1app
        fontscelta2app = data.font2app
        fontscelta3app = data.font3app

        nGiusto = data.giusto

        choosenChars = data.chars

        caricaFont()
        caricaLettere()
        
        clickAviable = true
        setTimeout(function()
        {
            overlayMultiplayer(false)
            overlayGiusto(false)
            overlayFirst(false)

            clickAviable = true
        },1000)
        

        //timerStart()   
    })

    //il nemico ha fatto punto
    socket.on('enemyPoint',function(data)
    {  
        clickAviable = false
        overlayFirst(true)
    })


    //il nemico si è disconesso
    socket.on("logout",function(data)
    {
        document.getElementById("disconnect").innerHTML = "L'avversario ha abbandonato la partita."

        if(points > data)
        {
            document.getElementById("disconnect").innerHTML += "<br><br>Hai vinto la partita con "+points+" punti.<br>L'avversario ne ha fatti solo "+data
        }
        else
        {
            document.getElementById("disconnect").innerHTML += "<br><br>L'avversario ha vinto la partita con "+points+" punti.<br>Tu ne hai fatti solo "+data
        }
        
        overlayDisconnect(true)

        setTimeout(goBack,10000)
    })
}
else
{
    scegliFont()
    caricaFont()

    scegliLettere()
    caricaLettere()

    setTimeout(overlayDisconnect,1000, false)

    timerStart()
}